# 什么是数仓
面向主题的、集成的、相对稳定，反映历史变化的一个数据集合
主要是为企业决策，是查询、分析和决策的基础
## 数据建模
为了方便管理，
## 数据分层
- ods层 原始数据层
- dwd ods层上主题的简单汇总表
- dws 数据服务层，各个主题的宽表
- ads 
- dim层 维度表 维度和事实表不是直接关联，而是级联的称为雪花型、

# hadoop
## MR的作用
- m实现kv产出 r实现k list<v>做简化
## MR过程中的排序（减少reduce的排序压力）
 - map  环形数组内存中排序一次（快速排序），溢出到本地文件，较多的小文件再做一次排序 （归并排序）
 - reduce 阶段接受到map文件再内存中，如果内存够就内存排序一次，如果内存不够就本地再排序（ 归并排序）
  - 聚合操作的时候需要shuffle
 -输出格式 默认是文本输出格式 kv形式的
# spark
 ## reduce by key 和group by key的区别
- reduce 可以再map端进行聚合减少后续的数据量，提高性能
- groupby 是要在reduce端做处理，数据量较大
# opds 
 -percentile_approx（列，0.5）  中位值 可以使用median但是数据量有会超过限制
 - 多个计算最好在percentile_approx（列，,array(0.05,0.5,0.95)） 返回一个数组
 
  
